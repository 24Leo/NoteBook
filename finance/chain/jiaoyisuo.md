交易平台内的买卖交易是不经过区块链的，只有用户转入转出币时，这个转入转出的交易才是记在区块里的
<div class="RichContent RichContent--unescapable"><div class="RichContent-inner"><span class="RichText CopyrightRichText-richText" itemprop="text"><p><b>哪些交易存在区块链中？</b></p><p>交易所本身所产生的<b>交易（trade）</b>是由挂单撮合而来，可以认为是交易所内部记账，是一个中心化的账本（通常是RDB数据库）。</p><p>当且仅当用户发起<b>充值/提现</b>请求时，才会产生区块链<b>交易（transaction）</b>，这时候才可以上区块浏览器上查询到交易。</p><p>所以交易所挂单交易和充值提现交易构成了交易所的两个不同账本，这两种交易也是完全不同的语义，前者指金融交易中的deal，后者指区块链上的技术概念——交易是指区块链一笔资产转移的记账。</p><p><br></p><p><b>交易所内部的交易是如何处理的？</b></p><p>一个交易所其实至少有四部分构成：<b>交易撮合系统，Web业务逻辑系统，运营后台管理系统，资金管理系统</b>。</p><ol><li>用户挂单经过web系统进入撮合系统进行撮合，生成trade；</li><li>trade进入RDB数据库，可供用户和运营系统查询；</li><li>用户经Web系统发起提币请求进入运营系统；</li><li>提币请求进入运营系统后审核，审核通过后，钱包服务（资金管理系统子系统）发起区块链上的交易（Transaction)。</li><li>更新提币状态，钱包服务提供交易ID以供运营系统和用户查询；</li></ol><p><br></p><p>撮合系统本质上是一个高并发的计算系统，重点是系统性能高和稳定性好，其中订单队列可以是编程语言中的数据容器，也可以是内存数据库；</p><p>Web业务系统与我们常见的电商系统无异，主要是用户账户以及简单业务逻辑，重点是可扩展性，业务要求弹性；</p><p>运营后台系统在整个交易所生命周期的早期并不凸显重要性，但是运营后台系统恰恰是交易所中后期发展的核心系统，重点在数据准确，要求网络安全性高和可扩展性好；</p><p>资金管理系统包含用户持仓状态，以及数字货币钱包服务，是一个交易平台中安全性要求最高的系统，资金管理系统往往要搭配一个内存数据库，其中数字货币钱包服务也可以拆出做成独立子系统，甚至可以改造成整个公司的内部区块浏览器，因为钱包服务需要设计成多个钱包实例的整个，并统一所有币种钱包接口；</p><p><br></p><p>通常的做法，可以购买一套文交所或者期货交易所的源码，只需要在资金管理系统中，把数字货币加上即可。</p><p><br></p>


[return](README.md)